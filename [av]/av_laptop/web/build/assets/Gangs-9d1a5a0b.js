import{u as j,s as S,j as e,y as C,r as c,m as y,B as M,T as N,K as k,A,M as T,f,x as B,L as _}from"./index-30f42a89.js";import{B as d}from"./Badge-5a2eb96f.js";import{M as E}from"./ModalMenu-4d728021.js";import{c as z}from"./imageExists-ca14fa46.js";import{G as w}from"./Grid-ccdb07e6.js";import{M as l}from"./Menu-f2938afd.js";import{C as u}from"./Card-73f8d616.js";import{I as G}from"./IconSettings-8c0335ca.js";import{I as O}from"./IconTrash-29367d2b.js";import{A as I}from"./AppShell-38a223e4.js";import{H as P}from"./Header-26183bc8.js";const g={marginLeft:"5px"},H=({gangInfo:a,members:s})=>{const{lang:r}=j(S);return e.jsx("div",{style:{display:"inline-flex",marginTop:"35px",marginLeft:"10px",width:"100%"},children:e.jsxs("span",{children:[e.jsx(d,{variant:"dot",color:"blue.3",children:`${a==null?void 0:a.label}`}),e.jsx(d,{variant:"dot",color:"blue.1",style:g,children:`${r.gangs.members}: ${s==null?void 0:s.length}`}),e.jsx(d,{variant:"dot",color:"blue.1",style:g,children:`${r.gangs.graffitis}: ${a==null?void 0:a.graffitis}`}),e.jsx(d,{variant:"dot",color:"blue.1",style:g,children:`${r.gangs.exp}: ${a==null?void 0:a.exp}`}),e.jsx(d,{variant:"dot",color:"blue.1",style:g,children:`${r.gangs.level}: ${a==null?void 0:a.level}`})]})})};const R=({myMembers:a})=>{const{lang:s}=j(S),{gangBoss:r}=j(C),[p,x]=c.useState(999),[h,i]=c.useState({}),[o,n]=c.useState(!1),m=t=>{if(t==p){x(999);return}x(t)},b=t=>{i({title:s.gangs.edit_image,options:[{name:"image",icon:"fa-regular fa-image",title:s.gangs.image_url,type:"text"}],button:s.gangs.confirm,extraData:{event:"addPhoto",member:t}}),n(!0)},D=t=>{i({title:s.gangs.remove,options:[{name:"info",description:`${s.gangs.remove_1} ${t.playerName} ${s.gangs.remove_2}`,type:"info",style:{textAlign:"center"}}],button:s.gangs.confirm,extraData:{event:"remove",member:t}}),n(!0)},L=()=>{i({title:s.gangs.invite,options:[{name:"playerId",icon:"fa-solid fa-user-plus",description:s.gangs.playerid,type:"number",style:{marginTop:"15px"}}],button:s.gangs.confirm,extraData:{event:"inviteMember"}}),n(!0)},$=t=>{n(!1),t!=null&&t.extraData.event&&(t.extraData.event=="addPhoto"?z(t.image,v=>{v&&f("av_gangs",t.extraData.event,t)}):f("av_gangs",t.extraData.event,t))};return e.jsxs("div",{className:"members-container",children:[o&&e.jsx(E,{callback:$,data:h}),r&&e.jsx("div",{style:{position:"absolute",zIndex:"200",bottom:y(45),right:y(20)},children:e.jsx(M,{leftIcon:e.jsx("i",{className:"fa-regular fa-square-plus"}),onClick:L,children:s.gangs.add})}),e.jsx(w,{columns:2,children:a==null?void 0:a.map((t,v)=>e.jsx(l,{shadow:"md",position:"right",onClose:()=>{m(999)},withinPortal:!0,withArrow:!0,children:e.jsx(w.Col,{className:"gang-card",children:e.jsxs(u,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,w:150,children:[e.jsx(u.Section,{children:e.jsx(N,{order:5,style:{textAlign:"center",width:"90%",marginLeft:"auto",marginRight:"auto"},truncate:!0,children:t.playerName})}),e.jsx(u.Section,{style:{marginTop:"5px"},children:e.jsx(k,{src:t!=null&&t.photo?t.photo:"https://i.imgur.com/QJlLeuN.png",alt:t.playerName,w:80,h:80,style:{marginLeft:"auto",marginRight:"auto",border:"solid 3px",marginBottom:r?"1px":"10px"},radius:100})}),r&&e.jsxs(u.Section,{children:[e.jsx(l.Target,{children:e.jsx(A,{variant:"transparent",children:e.jsx(G,{size:"1rem"})})}),e.jsxs(l.Dropdown,{style:{display:"flex",position:"absolute",zIndex:"99"},children:[e.jsx(l.Label,{style:{width:"140px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.playerName}),e.jsx(l.Item,{icon:e.jsx(T,{size:14}),onClick:()=>{setTimeout(()=>{b(t)},50)},children:s.gangs.change_pic}),e.jsx(l.Label,{children:s.gangs.danger}),e.jsx(l.Item,{color:"red",icon:e.jsx(O,{size:14}),onClick:()=>{D(t)},children:s.gangs.remove})]})]})]})})},v))})]})},ee=()=>{const[a,s]=c.useState(!0),[r,p]=c.useState([]),[x,h]=c.useState({});return B("updateMembers",i=>{p(i)}),c.useEffect(()=>{(async()=>{const o=await f("av_gangs","getData");if(p(o.members),o.level/100<1){const n={...o,level:0,exp:o.level};h(n)}if(o.level>=100){const n=o.level/100,m={...o,level:parseInt(n),exp:o.level};h(m)}setTimeout(()=>{s(!1)},250)})()},[]),e.jsx("div",{children:a?e.jsx("div",{style:{position:"absolute",width:"100%",height:"100%"},children:e.jsx(_,{visible:a,overlayBlur:2,overlayColor:"rgba(20, 21, 23, 1)"})}):e.jsx(I,{padding:"0",header:e.jsx(P,{height:68,children:e.jsx(H,{gangInfo:x,members:r})}),styles:i=>({main:{backgroundColor:i.colorScheme==="dark"?i.colors.dark[8]:i.colors.gray[0]}}),children:e.jsx(R,{myMembers:r})})})};export{ee as default};
