import{j as e,z as L,T as y,F as T,A as C,I as F,u as g,s as z,Y as A,r,m as j,B as D,f as x}from"./index-28ac6c93.js";import{F as b}from"./Flex-a153c916.js";import{M as N}from"./ModalMenu-a55b458a.js";import{S as $}from"./Select-ec223a6d.js";const B=({item:s,handleDelete:d})=>{var i;return e.jsxs("div",{className:"menu-item-card",children:[e.jsx(L,{src:s==null?void 0:s.image,height:60,width:60,alt:s.name,withPlaceholder:!0}),e.jsxs(b,{gap:"0px",justify:"center",align:"left",direction:"column",wrap:"wrap",maw:200,children:[e.jsx(y,{order:4,truncate:!0,maw:190,children:s.label}),e.jsx("span",{style:{display:"flex"},children:(i=s==null?void 0:s.ingredients)==null?void 0:i.map((o,c)=>e.jsx(T,{size:12,truncate:!0,children:e.jsx(e.Fragment,{children:s.ingredients[c+1]?e.jsx(e.Fragment,{children:`${o} |Â `}):e.jsx(e.Fragment,{children:`${o}`})})},c))})]}),e.jsx(b,{justify:"center",align:"right",direction:"column",sx:{marginLeft:"10px",marginRight:"10px"},children:e.jsx(C,{variant:"subtle",color:"red.4",size:"sm",onClick:()=>{d(s.name)},children:e.jsx(F,{size:"1rem"})})})]})};const G=()=>{const{lang:s}=g(z),{ingredients:d,itemTypes:i}=g(A),[o,c]=r.useState([{value:"all",label:s.business.all_type}]),[l,m]=r.useState([]),[f,u]=r.useState(l),[w,v]=r.useState({}),[k,h]=r.useState(!1),I=t=>{const n=l.filter(a=>t=="all"?l:a.type.toLowerCase().includes(t));u(n)},M=t=>{if(l.find(a=>a.name===t)){const a=l.filter(p=>p.name!==t);m(a),u(a),x("av_restaurants","deleteItem",t)}},S=()=>{h(!0)},_=async t=>{var n;if((n=t==null?void 0:t.extraData)!=null&&n.event){const a=await x("av_restaurants","addItem",t);a!=="ok"&&(m(a),u(a))}h(!1)};return r.useEffect(()=>{(async()=>{const n=await x("av_restaurants","getMenu");v({title:s.business.add_product,options:[{name:"name",type:"text",title:s.business.product_name,icon:"fa-solid fa-pen-to-square",asterisk:!0},{name:"image",type:"text",title:s.business.image_url,icon:"fa-regular fa-image",asterisk:!0},{name:"description",type:"text",title:s.business.description,icon:"fa-regular fa-comment",asterisk:!0},{name:"type",type:"select",title:s.business.item_type,default:"normal",options:i,asterisk:!0,style:{marginTop:"5px"}},{name:"ingredients",type:"multiselect",title:s.business.ingredients,default:"normal",max:3,searchable:!0,options:d,asterisk:!0,style:{marginTop:"5px"}}],button:s.business.confirm,extraData:{event:"newItem"}}),u(n),m(n),i.map(a=>c(p=>[...p,a]))})()},[]),e.jsxs("div",{className:"menu-container",children:[k&&e.jsx(N,{callback:_,data:w}),e.jsx("div",{style:{position:"absolute",zIndex:"200",bottom:j(45),right:j(20)},children:e.jsx(D,{leftIcon:e.jsx("i",{className:"fa-regular fa-square-plus"}),onClick:S,children:s.business.new_button})}),e.jsxs("div",{className:"menu-header",children:[e.jsx(y,{order:3,children:`${f.length} ${s.business.items}`}),e.jsx($,{defaultValue:"all",data:o,onChange:I})]}),e.jsx("div",{className:"menu-items",children:f.map((t,n)=>e.jsx(B,{item:t,handleDelete:M},t.name+n))})]})};export{G as default};
