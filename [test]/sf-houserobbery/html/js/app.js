(function(){var __webpack_modules__={5678:function(t,e,r){"use strict";r.r(e);var n=r(6747);const s={loadTime:3e3,dotCount:35,speed:.00125,translation:{get_ready:"Get ready",success:"Success",failed:"Failed",title:"Click all the blocks in the right order"}},i={setOptions({commit:t},e){t("SET_OPTIONS",e)}},o={SET_OPTIONS(t,e){t=(0,n.PM)(t,e)}},a={};e["default"]={namespaced:!0,state:s,getters:a,actions:i,mutations:o}},6585:function(t,e,r){"use strict";var n=r(9242),s=r(3396);const i={class:"app"};function o(t,e,r,n,o,a){return(0,s.wg)(),(0,s.iD)("div",i,[t.currentGame?((0,s.wg)(),(0,s.j4)((0,s.LL)(t.availableGames[t.currentGame]),{key:0})):(0,s.kq)("",!0)])}var a=r(65),c={name:"app",computed:{...(0,a.rn)(["availableGames","currentGame"])},mounted(){this.$store.state.isDev&&(document.body.style.backgroundColor="rgb(50,50,50)")}},u=r(89);const h=(0,u.Z)(c,[["render",o]]);var l=h;const _={},d={};let f,p;f=r(69),p=r(7768),f.keys().forEach((t=>{const e=t.replace(/(\.store\.js)/,"").replace("./","");_[e]=f(t).default||f(t)})),p.keys().forEach((t=>{const e=t.replace(/(\.vue)/,"").replace("./","");d[e]=p(t).default||p(t)}));const g=!1;var m=(0,a.MT)({state:{isDev:g,currentGame:g?"movingBlocks":"",availableGames:d,createdBy:"SCRIPTFORGE: https://scriptforge.gg"},mutations:{SET_CURRENT_GAME(t,e){t.currentGame=e}},modules:_});const w=`https://${m.state.isDev?"":GetParentResourceName()}/`;class v{constructor(){this.log=m.state.isDev,window.addEventListener("message",(t=>{const e=t.data.event;void 0!==e&&"function"===typeof this["on_"+e]&&this["on_"+e](t.data)}))}async postInternal(t,e,r,n=!0){let s;r=void 0===r?"{}":JSON.stringify(r);try{s=await fetch(t+e,{body:r,method:"POST"})}catch(i){return n?{}:"ERROR"}return n?await s.json():await s.text()}async post(t,e,r=!1){return this.postInternal(w,t,e,r)}async postForResource(t,e,r,n){return this.postInternal(`https://${t}/`,e,r,n)}async on_sendAppEvent({app:t,action:e,payload:r}){await m.dispatch(`${t}/${e}`,r)}async on_setCurrentGame({game:t}){await m.commit("SET_CURRENT_GAME",t)}async sendStatus(t){return m.commit("SET_CURRENT_GAME",null),await this.post("setStatus",{status:t},!0)}}var b=new v;const k=(0,n.ri)(l).use(m);k.config.globalProperties.FivemAPI=b,k.config.globalProperties.$store=m,k.mount("#app")},6747:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function rand(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function shuffleArray(t){t=[...t];for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}function setCharAt(t,e,r){return e>t.length-1?t:t.substring(0,e)+r+t.substring(e+1)}__webpack_require__.d(__webpack_exports__,{Dk:function(){return roundRect},PM:function(){return mergeObjects},nA:function(){return getTimer}});const plSigns=null,changedSigns=null;function removePolishSigns(t){let e="";for(let r=0;r<t.length;r++){let n=t[r];const s=plSigns.indexOf(n);-1!==s&&(n=changedSigns[s]),e+=n}return e}function mergeObjects(t,e,r=[]){for(let n in t)-1===r.indexOf(n)&&e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function getTimer(){return(new Date).getTime()}function mathEval(str){for(let t=0;t<str.length;t++)if(isNaN(str[t])&&!["+","-","/","*","%","**","(",")"].includes(str[t]))return NaN;try{return eval(str)}catch(e){if("SyntaxError"!==e.name)throw e;return NaN}}function objectEquals(t,e){if(null===t||void 0===t||null===e||void 0===e)return t===e;if(t.constructor!==e.constructor)return!1;if(t instanceof Function)return t===e;if(t instanceof RegExp)return t===e;if(t===e||t.valueOf()===e.valueOf())return!0;if(Array.isArray(t)&&t.length!==e.length)return!1;if(t instanceof Date)return!1;if(!(t instanceof Object))return!1;if(!(e instanceof Object))return!1;const r=Object.keys(t);return Object.keys(e).every((function(t){return-1!==r.indexOf(t)}))&&r.every((function(r){return objectEquals(t[r],e[r])}))}function roundRect(t,e,r,n,s,i=5,o=!1,a=!0){i="number"===typeof i?{tl:i,tr:i,br:i,bl:i}:{tl:0,tr:0,br:0,bl:0,...i},t.beginPath(),t.moveTo(e+i.tl,r),t.lineTo(e+n-i.tr,r),t.quadraticCurveTo(e+n,r,e+n,r+i.tr),t.lineTo(e+n,r+s-i.br),t.quadraticCurveTo(e+n,r+s,e+n-i.br,r+s),t.lineTo(e+i.bl,r+s),t.quadraticCurveTo(e,r+s,e,r+s-i.bl),t.lineTo(e,r+i.tl),t.quadraticCurveTo(e,r,e+i.tl,r),t.closePath(),o&&t.fill(),a&&t.stroke()}async function Wait(t){return new Promise((e=>{setTimeout(e,t)}))}function randNonInt(t,e){return t+Math.random()*(e-t)}function clamp(t,e,r){return Math.min(Math.max(t,e),r)}function IsPointInsidePolygon(t,e){const r=t[0],n=t[1];let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const t=e[i][0],a=e[i][1],c=e[o][0],u=e[o][1],h=a>n!==u>n&&r<(c-t)*(n-a)/(u-a)+t;h&&(s=!s)}return s}},7481:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return M}});var n=r(3396),s=r(7139);const i={class:"piano-tiles-wrapper"},o={key:0,class:"notice"},a={key:0},c={key:1},u={key:2},h={key:1,class:"game"},l={ref:"canvas"};function _(t,e,r,_,d,f){const p=(0,n.up)("ProgBar");return(0,n.wg)(),(0,n.iD)("div",i,[d.state!==d.STATE_PLAYING?((0,n.wg)(),(0,n.iD)("div",o,[d.state===d.STATE_BEFORE_DISPLAY?((0,n.wg)(),(0,n.iD)("p",a,(0,s.zw)(t.translation.get_ready),1)):(0,n.kq)("",!0),d.state===d.STATE_SUCCESS?((0,n.wg)(),(0,n.iD)("p",c,(0,s.zw)(t.translation.success),1)):(0,n.kq)("",!0),d.state===d.STATE_FAILED?((0,n.wg)(),(0,n.iD)("p",u,(0,s.zw)(t.translation.failed),1)):(0,n.kq)("",!0)])):((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("h2",null,(0,s.zw)(t.translation.title),1),(0,n._)("canvas",l,null,512)])),d.state!==d.STATE_PLAYING?((0,n.wg)(),(0,n.j4)(p,{key:2,ref:"progbar"},null,512)):(0,n.kq)("",!0)])}var d=r(6747);const f={class:"progbar-wrapper"};function p(t,e,r,i,o,a){return(0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("div",{class:"progbar",style:(0,s.j5)(`--progress: ${100*o.prog}%;`)},null,4)])}var g={name:"ProgBar",data(){return{prog:.5}},props:{progress:{type:Number,default:.5}},methods:{setProgress(t){this.prog=t}},mounted(){this.prog=this.progress}},m=r(89);const w=(0,m.Z)(g,[["render",p],["__scopeId","data-v-803ee5d0"]]);var v=w;r(7658);const b={WIN:1,LOSE:2,NONE:0},k=["#FC473D","#2394FC","#E8FC0A","#75B301","#0084FF","#1CDE5B"],y=.1,T=.5,E=.015,S=.1,x=.09,O=.005,A="#3A5167",D=300;function C(){return y+Math.random()*(T-y)}class N{constructor(t,e,r,n,s,i){this.key=i,this.pressed=!1,this.game=t,this.color=e,this.y=r,this.dots=[],this.speed=s,this.transition=0;let o=e.substring(1).match(/.{1,2}/g);for(let c=0;c<o.length;c++)o[c]=parseInt(o[c],16);this.targetColorRgb=o.slice(),this.targetColor=`rgba(${o.join(", ")}, 0.25)`;let a=T;for(let c=0;c<n;c++)a+=C(),this.dots.push(a)}drawRoute(){this.game.context.save();const[t,e]=this.game.getDrawCoords(.05,this.y+x/2-O/2),[r,n]=this.game.getDrawCoords(.9,O);this.game.context.fillStyle=A,d.Dk(this.game.context,t,e,r,n,.5,!0,!1),this.game.context.restore()}drawTarget(t){this.game.context.save();const[e,r]=this.game.getDrawCoords(x,this.y);this.game.context.fillStyle=this.targetColor,this.game.context.strokeStyle=this.color,this.game.context.lineWidth=2,this.pressed?(this.transition+=t/D,this.transition=Math.min(1,this.transition)):(this.transition-=t/D,this.transition=Math.max(0,this.transition)),this.transition>0&&(this.game.context.shadowBlur=25,this.game.context.shadowOffsetY=0,this.game.context.shadowColor=`rgba(${this.targetColorRgb.join(",")}, ${.5*this.transition})`);const[n]=this.game.getDrawCoords(x);this.game.context.beginPath(),this.game.context.arc(e+n/2,r+n/2,n/2,0,360),this.game.context.stroke(),this.game.context.fill(),this.game.context.closePath(),this.game.context.fillStyle=this.color,this.game.context.font=`bold ${n/2}px Rajdhani`;const[s,i]=this.game.getDrawCoords(1.5*x,this.y+x/2),o=this.game.context.measureText(this.key.toUpperCase());this.game.context.fillText(this.key.toUpperCase(),s-o.width/2,i+o.actualBoundingBoxAscent/2+2),this.game.context.restore()}drawDot(t){if(t<2*E)return b.LOSE;this.game.context.save();const[e]=this.game.getDrawCoords(E);this.game.context.fillStyle=this.color,this.game.context.shadowBlur=2,this.game.context.shadowOffsetY=e/5,this.game.context.shadowColor=this.color;const[r,n]=this.game.getDrawCoords(t,this.y+x/2);return this.game.context.beginPath(),this.game.context.arc(r,n,e,0,360,!1),this.game.context.closePath(),this.game.context.fill(),this.game.context.restore(),b.NONE}updateDots(t){for(let e=0;e<this.dots.length;e++){this.dots[e]=this.dots[e]-this.speed*t/10;const r=this.drawDot(this.dots[e]);if(r!==b.NONE)return r}return this.dots.length?b.NONE:b.WIN}keyDown(){if(this.pressed=!0,0===this.dots.length)return;const t=this.dots[0];return t>x-x&&t<x+x&&(this.dots.shift(),!0)}keyUp(){this.pressed=!1}update(t){return this.drawRoute(),this.drawTarget(t),this.updateDots(t)}}class P{constructor(t,e,r,n,s){this.context=t.getContext("2d"),this.context.canvas.width=t.clientWidth,this.context.canvas.height=t.clientHeight,this.lines=[],s=Object.fromEntries(Object.entries(s).map((([t,e])=>[e,t])));let i=.5-S*(e-1)/2-e/2*x;for(let o=0;o<e;o++)this.lines.push(new N(this,k[o],i,Math.floor(r/e),n*(1.5-.5*Math.random()),s[o])),i+=S+x}getDrawCoords(t,e){const{width:r,height:n}=this.context.canvas;return[t*r,e*n]}keyDown(t){if(this.lines[t])return this.lines[t].keyDown()}keyUp(t){if(this.lines[t])return this.lines[t].keyUp()}update(t){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height);let e=!0;for(const r of this.lines){const n=r.update(t);if(n!==b.WIN&&(e=!1,n===b.LOSE))return n}return e?b.WIN:b.NONE}}var I=r(65);const q={d:0,f:1,g:2,h:3};var L={name:"pianoTiles",components:{ProgBar:v},data(){return{STATE_BEFORE_DISPLAY:0,STATE_PLAYING:1,STATE_FAILED:2,STATE_SUCCESS:3,timeSet:0,timeLeft:0,state:0,interval:0,game:null}},computed:{...(0,I.rn)("pianoTiles",["dotCount","speed","translation","loadTime"])},methods:{setTime(t,e=!0){this.timeLeft=t,e&&(this.timeSet=t)},keyUp(t){if(this.state!==this.STATE_PLAYING)return;if(!this.game)return;const e=t.key,r=q[e];void 0!==r&&this.game.keyUp(r)},keyDown(t){if(this.state!==this.STATE_PLAYING)return;if(!this.game)return;const e=t.key,r=q[e];void 0!==r&&(this.game.keyDown(r)||(this.state=this.STATE_FAILED,this.setTime(4e3)))}},mounted(){let t=(0,d.nA)();this.setTime(this.loadTime),this.interval=setInterval((()=>{const e=(0,d.nA)(),r=e-t;if(t=e,this.timeLeft-=r,this.state!==this.STATE_PLAYING)this.$refs.progbar.setProgress(this.timeLeft/this.timeSet);else{const t=this.game.update(r);t!==b.NONE&&(this.state=t===b.WIN?this.STATE_SUCCESS:this.STATE_FAILED,this.setTime(4e3))}this.timeLeft<=0&&(this.state===this.STATE_BEFORE_DISPLAY?(this.state=this.STATE_PLAYING,this.setTime(this.time),this.$nextTick((()=>{this.game=new P(this.$refs.canvas,4,this.dotCount,this.speed,q)}))):this.state===this.STATE_SUCCESS?this.FivemAPI.sendStatus(!0):this.state===this.STATE_FAILED&&this.FivemAPI.sendStatus(!1))}),0),window.addEventListener("keyup",this.keyUp),window.addEventListener("keydown",this.keyDown)},beforeUnmount(){clearInterval(this.interval),window.removeEventListener("keyup",this.keyUp),window.removeEventListener("keydown",this.keyDown)}};const j=(0,m.Z)(L,[["render",_],["__scopeId","data-v-76490daa"]]);var M=j},69:function(t,e,r){var n={"./pianoTiles.store.js":5678};function s(t){var e=i(t);return r(e)}function i(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=i,t.exports=s,s.id=69},7768:function(t,e,r){var n={"./pianoTiles.vue":7481};function s(t){var e=i(t);return r(e)}function i(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=i,t.exports=s,s.id=7768}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,function(){var t=[];__webpack_require__.O=function(e,r,n,s){if(!r){var i=1/0;for(u=0;u<t.length;u++){r=t[u][0],n=t[u][1],s=t[u][2];for(var o=!0,a=0;a<r.length;a++)(!1&s||i>=s)&&Object.keys(__webpack_require__.O).every((function(t){return __webpack_require__.O[t](r[a])}))?r.splice(a--,1):(o=!1,s<i&&(i=s));if(o){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[r,n,s]}}(),function(){__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return __webpack_require__.d(e,{a:e}),e}}(),function(){__webpack_require__.d=function(t,e){for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){__webpack_require__.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};__webpack_require__.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,s,i=r[0],o=r[1],a=r[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(n in o)__webpack_require__.o(o,n)&&(__webpack_require__.m[n]=o[n]);if(a)var u=a(__webpack_require__)}for(e&&e(r);c<i.length;c++)s=i[c],__webpack_require__.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return __webpack_require__.O(u)},r=self["webpackChunksf_minigames"]=self["webpackChunksf_minigames"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(6585)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();